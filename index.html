<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCBarato: Seu Assistente de Montagem de PC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .nav-link { transition: all 0.3s ease; position: relative; }
        .nav-link::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 2px; background-color: #14b8a6; transition: width 0.3s ease; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .spinner { display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite; }
        .modal-spinner { border-top-color: #0d9488; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="font-bold text-xl text-teal-600">PCBarato</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#conceito" class="nav-link text-slate-600 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">O Conceito</a>
                        <a href="#ecossistema" class="nav-link text-slate-600 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">Ecossistema</a>
                        <a href="#como-funciona" class="nav-link text-slate-600 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">Como Funciona</a>
                        <a href="#monetizacao" class="nav-link text-slate-600 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">Monetiza√ß√£o</a>
                        <a href="#roadmap" class="nav-link text-slate-600 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">Pr√≥ximos Passos</a>
                    </div>
                </div>
                 <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-slate-500 hover:text-teal-600 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                        <span class="sr-only">Abrir menu principal</span>
                        <div id="hamburger-icon" class="block h-6 w-6">
                           <span class="block w-6 h-0.5 bg-current transform transition duration-500 ease-in-out"></span>
                           <span class="block w-6 h-0.5 bg-current mt-1.5 transform transition duration-500 ease-in-out"></span>
                           <span class="block w-6 h-0.5 bg-current mt-1.5 transform transition duration-500 ease-in-out"></span>
                        </div>
                    </button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                 <a href="#conceito" class="mobile-nav-link block text-slate-600 hover:text-teal-600 hover:bg-slate-100 px-3 py-2 rounded-md text-base font-medium">O Conceito</a>
                 <a href="#ecossistema" class="mobile-nav-link block text-slate-600 hover:text-teal-600 hover:bg-slate-100 px-3 py-2 rounded-md text-base font-medium">Ecossistema</a>
                 <a href="#como-funciona" class="mobile-nav-link block text-slate-600 hover:text-teal-600 hover:bg-slate-100 px-3 py-2 rounded-md text-base font-medium">Como Funciona</a>
                 <a href="#monetizacao" class="mobile-nav-link block text-slate-600 hover:text-teal-600 hover:bg-slate-100 px-3 py-2 rounded-md text-base font-medium">Monetiza√ß√£o</a>
                 <a href="#roadmap" class="mobile-nav-link block text-slate-600 hover:text-teal-600 hover:bg-slate-100 px-3 py-2 rounded-md text-base font-medium">Pr√≥ximos Passos</a>
            </div>
        </div>
    </header>

    <main>
        <section id="conceito" class="py-20 md:py-28 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-slate-900">Monte o PC dos seus sonhos, sem gastar um centavo a mais.</h1>
                <p class="mt-6 max-w-3xl mx-auto text-lg md:text-xl text-slate-600">O PCBarato √© seu assistente inteligente que encontra as melhores pe√ßas com o menor pre√ßo. Diga o que voc√™ precisa, e n√≥s montamos a build perfeita para o seu bolso.</p>
                <div class="mt-10 max-w-xl mx-auto">
                    <div class="bg-white rounded-lg shadow-lg p-2 flex flex-col sm:flex-row items-stretch sm:items-center gap-2">
                        <input id="pc-request-input" type="text" placeholder="Ex: PC para jogar Fortnite com R$4000" class="w-full bg-transparent text-slate-700 placeholder-slate-400 focus:outline-none px-4 py-3 sm:py-0 border border-slate-200 sm:border-none rounded-md">
                        <button id="generate-build-button" class="w-full sm:w-auto bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-6 rounded-md transition-colors duration-300 whitespace-nowrap flex items-center justify-center gap-2">
                            <span>‚ú® Montar PC com IA</span>
                        </button>
                    </div>
                </div>
                 <div id="ai-results" class="hidden mt-12 max-w-4xl mx-auto text-left">
                    <div class="bg-slate-50 border border-slate-200 rounded-lg p-6">
                        <h3 class="text-2xl font-bold text-slate-800 mb-4">Build Sugerida pela IA</h3>
                        <div id="ai-analysis" class="mb-6 p-4 bg-teal-50 border-l-4 border-teal-500 rounded-r-lg text-teal-800"></div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-slate-200">
                                <thead class="bg-slate-100">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Componente</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Sugest√£o</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Melhor Pre√ßo Encontrado</th>
                                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase tracking-wider">A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody id="build-table-body" class="bg-white divide-y divide-slate-200">
                                </tbody>
                                <tfoot id="build-table-foot" class="bg-slate-100">
                                </tfoot>
                            </table>
                        </div>
                        <div id="error-message" class="hidden mt-4 p-4 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-r-lg"></div>
                        
                        <div id="results-actions" class="hidden mt-6 flex flex-wrap items-center gap-4">
                            <button id="optimize-build-button" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-md transition-colors duration-300 flex items-center justify-center gap-2">
                                <span>‚ú® Otimizar Custo-Benef√≠cio</span>
                            </button>
                             <button id="analyze-fps-button" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md transition-colors duration-300 flex items-center justify-center gap-2">
                                <span>üéÆ Analisar Desempenho</span>
                            </button>
                            <button id="clear-results-button" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-2 px-4 rounded-md transition-colors duration-300">Limpar</button>
                        </div>
                        
                        <div id="optimization-result-container" class="hidden mt-6">
                             <h4 class="text-xl font-bold text-slate-800 mb-2">An√°lise de Otimiza√ß√£o ‚ú®</h4>
                             <div id="optimization-result-text" class="p-4 bg-amber-50 border-l-4 border-amber-500 rounded-r-lg text-amber-800"></div>
                        </div>

                        <div id="fps-analysis-container" class="hidden mt-6">
                            <h4 class="text-xl font-bold text-slate-800 mb-2">An√°lise de Desempenho (FPS) üéÆ</h4>
                            <div id="fps-text-analysis" class="mb-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg text-blue-800"></div>
                            <div class="chart-container">
                                <canvas id="fpsChart"></canvas>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <section id="ecossistema" class="py-20 md:py-24">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900">Um Ecossistema de Valor</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">Entendemos quem s√£o nossos usu√°rios e o que eles mais valorizam. Nossa plataforma foi desenhada para atender √†s necessidades espec√≠ficas de cada perfil, entregando a solu√ß√£o ideal com total transpar√™ncia.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="audience-card bg-white p-6 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer border-2 border-transparent" data-target="gamer">
                        <div class="flex items-center mb-4">
                             <span class="text-3xl mr-4">üéÆ</span>
                            <h3 class="text-xl font-bold text-slate-800">Gamers Iniciantes</h3>
                        </div>
                        <p class="text-slate-600">Buscam o m√°ximo de FPS por real investido, sem a complexidade de escolher cada pe√ßa.</p>
                    </div>
                    <div class="audience-card bg-white p-6 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer border-2 border-transparent" data-target="professional">
                        <div class="flex items-center mb-4">
                             <span class="text-3xl mr-4">üíº</span>
                            <h3 class="text-xl font-bold text-slate-800">Estudantes e Profissionais</h3>
                        </div>
                        <p class="text-slate-600">Precisam de uma m√°quina confi√°vel para trabalho ou estudo, sem serem especialistas em hardware.</p>
                    </div>
                    <div class="audience-card bg-white p-6 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer border-2 border-transparent" data-target="enthusiast">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">üîß</span>
                            <h3 class="text-xl font-bold text-slate-800">Entusiastas Ca√ßa-Promo√ß√µes</h3>
                        </div>
                        <p class="text-slate-600">J√° conhecem hardware, mas querem automatizar a busca pelas melhores pechinchas do mercado.</p>
                    </div>
                </div>

                <div id="value-proposition-display" class="mt-12 bg-teal-50 border-l-4 border-teal-500 p-8 rounded-r-lg transition-opacity duration-500 opacity-0 min-h-[180px]">
                    <div id="gamer-value" class="value-content hidden">
                        <h4 class="text-2xl font-bold text-teal-900 mb-3">Proposta de Valor para Gamers</h4>
                        <ul class="list-disc list-inside space-y-2 text-teal-800">
                            <li><strong>Economia de Tempo e Dinheiro:</strong> Montamos a build com o melhor custo-benef√≠cio, comparando pre√ßos em tempo real.</li>
                            <li><strong>Decis√£o Simplificada:</strong> Traduzimos "rodar um jogo" em uma lista de pe√ßas compat√≠veis e com links de compra.</li>
                            <li><strong>Confian√ßa e Transpar√™ncia:</strong> Mostramos benchmarks estimados (FPS) e v√≠deos de testes de builds similares.</li>
                        </ul>
                    </div>
                    <div id="professional-value" class="value-content hidden">
                         <h4 class="text-2xl font-bold text-teal-900 mb-3">Proposta para Profissionais</h4>
                        <ul class="list-disc list-inside space-y-2 text-teal-800">
                            <li><strong>Efici√™ncia Garantida:</strong> Foco em componentes para produtividade, como mais RAM e processadores com m√∫ltiplos n√∫cleos.</li>
                            <li><strong>Compra sem Estresse:</strong> Evita o jarg√£o t√©cnico e oferece uma solu√ß√£o "plug-and-play" para suas necessidades.</li>
                            <li><strong>Investimento Inteligente:</strong> Garante que voc√™ n√£o pague a mais por performance que n√£o usar√°.</li>
                        </ul>
                    </div>
                    <div id="enthusiast-value" class="value-content hidden">
                         <h4 class="text-2xl font-bold text-teal-900 mb-3">Proposta para Entusiastas</h4>
                        <ul class="list-disc list-inside space-y-2 text-teal-800">
                            <li><strong>Agilidade na Pesquisa:</strong> Automatiza a ca√ßa por promo√ß√µes, cupons e melhores condi√ß√µes de parcelamento.</li>
                            <li><strong>Descoberta de Oportunidades:</strong> Alerta sobre quedas de pre√ßo e disponibilidade de estoque em diversas lojas.</li>
                            <li><strong>Controle Total:</strong> Permite comparar builds e customizar a lista final antes da compra.</li>
                        </ul>
                    </div>
                     <div id="default-value" class="value-content">
                        <p class="text-lg text-teal-700">Clique em um perfil de p√∫blico acima para ver a proposta de valor espec√≠fica para ele.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="como-funciona" class="py-20 md:py-24 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900">Como a M√°gica Acontece</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">Nossa plataforma utiliza um processo de quatro etapas para transformar sua necessidade em uma lista de compras otimizada, garantindo compatibilidade, o melhor pre√ßo e desempenho.</p>
                </div>

                <div class="relative">
                    <div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-slate-200 -translate-y-1/2"></div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-12 relative">
                        
                        <div class="text-center">
                            <div class="flex justify-center items-center mx-auto w-16 h-16 rounded-full bg-teal-500 text-white font-bold text-2xl border-4 border-white shadow-lg mb-4">1</div>
                            <h3 class="font-bold text-lg mb-2">Input do Usu√°rio ‚ú®</h3>
                            <p class="text-slate-600 text-sm">Voc√™ nos diz o que precisa e nossa IA interpreta seu pedido.</p>
                        </div>

                        <div class="text-center">
                            <div class="flex justify-center items-center mx-auto w-16 h-16 rounded-full bg-teal-500 text-white font-bold text-2xl border-4 border-white shadow-lg mb-4">2</div>
                            <h3 class="font-bold text-lg mb-2">An√°lise da IA</h3>
                            <p class="text-slate-600 text-sm">Nosso motor de recomenda√ß√£o identifica as pe√ßas ideais, seus pre√ßos e a compatibilidade.</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="flex justify-center items-center mx-auto w-16 h-16 rounded-full bg-teal-500 text-white font-bold text-2xl border-4 border-white shadow-lg mb-4">3</div>
                            <h3 class="font-bold text-lg mb-2">Busca em Tempo Real</h3>
                            <p class="text-slate-600 text-sm">Simulamos buscas de pre√ßos e cupons nas maiores lojas do Brasil.</p>
                        </div>

                        <div class="text-center">
                            <div class="flex justify-center items-center mx-auto w-16 h-16 rounded-full bg-teal-500 text-white font-bold text-2xl border-4 border-white shadow-lg mb-4">4</div>
                            <h3 class="font-bold text-lg mb-2">Build Finalizada ‚ú®</h3>
                            <p class="text-slate-600 text-sm">A IA apresenta a melhor build, com an√°lise, pre√ßo "ao vivo" e links para compra.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="monetizacao" class="py-20 md:py-24">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900">Modelo de Neg√≥cio Sustent√°vel</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">Nossa receita √© gerada de forma transparente, alinhada ao nosso objetivo de oferecer o melhor servi√ßo ao usu√°rio. O foco est√° em criar valor real, que se traduz em um modelo de neg√≥cio saud√°vel e escal√°vel.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <div>
                        <div class="chart-container">
                            <canvas id="monetizationChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-6">
                        <div class="flex items-start">
                            <div class="w-4 h-4 rounded-full bg-teal-500 mt-1.5 mr-4 flex-shrink-0"></div>
                            <div>
                                <h4 class="font-bold text-lg">Marketing de Afiliados (Principal)</h4>
                                <p class="text-slate-600">Recebemos uma comiss√£o sobre as vendas realizadas atrav√©s dos nossos links, sem custo adicional para o usu√°rio. √â o nosso principal motor de receita.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                             <div class="w-4 h-4 rounded-full bg-cyan-500 mt-1.5 mr-4 flex-shrink-0"></div>
                            <div>
                                <h4 class="font-bold text-lg">Publicidade Display (Adsense)</h4>
                                <p class="text-slate-600">An√∫ncios contextuais e n√£o intrusivos que complementam a receita e ajudam a manter a plataforma gratuita.</p>
                            </div>
                        </div>
                         <div class="flex items-start">
                             <div class="w-4 h-4 rounded-full bg-sky-500 mt-1.5 mr-4 flex-shrink-0"></div>
                            <div>
                                <h4 class="font-bold text-lg">Conte√∫do e YouTube</h4>
                                <p class="text-slate-600">Um canal testando as builds gera autoridade, atrai tr√°fego e pode ser monetizado via ads e patroc√≠nios, fortalecendo a marca.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="roadmap" class="py-20 md:py-24 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                 <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900">Nossos Pr√≥ximos Passos</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">Temos um caminho claro para transformar esta vis√£o em realidade. O foco inicial √© na valida√ß√£o t√©cnica e no desenvolvimento de um produto m√≠nimo vi√°vel (MVP) robusto e funcional.</p>
                </div>
                <div class="max-w-2xl mx-auto">
                    <ul class="space-y-6">
                        <li class="flex items-center">
                            <div class="flex-shrink-0 w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center mr-4">
                                <span class="text-teal-600 font-bold">1</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg">Valida√ß√£o T√©cnica</h4>
                                <p class="text-slate-600">Pesquisar APIs das lojas alvo e planejar a arquitetura de web scraping para garantir a coleta de dados em tempo real.</p>
                            </div>
                        </li>
                         <li class="flex items-center">
                            <div class="flex-shrink-0 w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center mr-4">
                                 <span class="text-teal-600 font-bold">2</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg">Design UX/UI</h4>
                                <p class="text-slate-600">Criar uma interface intuitiva, com foco na simplicidade da barra de busca e na clareza dos resultados da build.</p>
                            </div>
                        </li>
                         <li class="flex items-center">
                            <div class="flex-shrink-0 w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center mr-4">
                                 <span class="text-teal-600 font-bold">3</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg">Desenvolvimento do MVP</h4>
                                <p class="text-slate-600">Lan√ßar a primeira vers√£o com 2-3 lojas parceiras e as funcionalidades essenciais de montagem e compara√ß√£o.</p>
                            </div>
                        </li>
                         <li class="flex items-center">
                            <div class="flex-shrink-0 w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center mr-4">
                                 <span class="text-teal-600 font-bold">4</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg">Estrat√©gia de Conte√∫do</h4>
                                <p class="text-slate-600">Iniciar o canal do YouTube e o blog para construir audi√™ncia e autoridade no nicho antes mesmo do lan√ßamento.</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-slate-300">
        <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2025 PCBarato. Um novo jeito de montar seu PC.</p>
        </div>
    </footer>

    <!-- Explanation Modal -->
    <div id="explanation-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg">
            <div class="p-6 border-b border-slate-200 flex justify-between items-center">
                <h3 id="modal-title" class="text-xl font-bold">Explicando o Componente</h3>
                <button id="close-modal-button" class="text-slate-500 hover:text-slate-800 text-2xl leading-none">&times;</button>
            </div>
            <div id="modal-body" class="p-6">
                <div class="flex justify-center items-center h-24">
                    <div class="spinner modal-spinner"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const generateBuildButton = document.getElementById('generate-build-button');
            const pcRequestInput = document.getElementById('pc-request-input');
            const aiResultsContainer = document.getElementById('ai-results');
            const aiAnalysisDiv = document.getElementById('ai-analysis');
            const buildTableBody = document.getElementById('build-table-body');
            const buildTableFoot = document.getElementById('build-table-foot');
            const errorMessageDiv = document.getElementById('error-message');
            const resultsActions = document.getElementById('results-actions');
            const clearResultsButton = document.getElementById('clear-results-button');
            const optimizeBuildButton = document.getElementById('optimize-build-button');
            const optimizationResultContainer = document.getElementById('optimization-result-container');
            const optimizationResultText = document.getElementById('optimization-result-text');
            const analyzeFpsButton = document.getElementById('analyze-fps-button');
            const fpsAnalysisContainer = document.getElementById('fps-analysis-container');
            const fpsTextAnalysis = document.getElementById('fps-text-analysis');
            const fpsChartCanvas = document.getElementById('fpsChart');
            const explanationModal = document.getElementById('explanation-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const closeModalButton = document.getElementById('close-modal-button');
            
            let currentBuildData = null;
            let fpsChartInstance = null;

            const setButtonLoadingState = (button, isLoading, originalText) => {
                const buttonTextSpan = button.querySelector('span');
                if (isLoading) {
                    button.disabled = true;
                    button.classList.add('opacity-75', 'cursor-not-allowed');
                    buttonTextSpan.innerHTML = '<span class="spinner"></span>';
                } else {
                    button.disabled = false;
                    button.classList.remove('opacity-75', 'cursor-not-allowed');
                    buttonTextSpan.innerHTML = originalText;
                }
            };
            
            const displayError = (message) => {
                errorMessageDiv.textContent = message;
                errorMessageDiv.classList.remove('hidden');
                aiAnalysisDiv.classList.add('hidden');
                buildTableBody.parentElement.classList.add('hidden');
                resultsActions.classList.add('hidden');
            };
            
            const resetUI = () => {
                aiResultsContainer.classList.add('hidden');
                currentBuildData = null;
                optimizationResultContainer.classList.add('hidden');
                fpsAnalysisContainer.classList.add('hidden');
            };

            clearResultsButton.addEventListener('click', () => {
                 pcRequestInput.value = '';
                 resetUI();
            });
            
            async function callApi(action, payload) {
                const response = await fetch('/.netlify/functions/api', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ action, payload }),
                });

                if (!response.ok) {
                    const errorBody = await response.json();
                    throw new Error(errorBody.error || 'Falha na comunica√ß√£o com o backend.');
                }
                
                const result = await response.json();
                if (result.error) throw new Error(result.error);
                
                return result;
            }

            generateBuildButton.addEventListener('click', async () => {
                const prompt = pcRequestInput.value;
                if (!prompt) {
                    alert('Por favor, descreva o PC que voc√™ deseja.');
                    return;
                }

                setButtonLoadingState(generateBuildButton, true, '‚ú® Montar PC com IA');
                resetUI();
                aiResultsContainer.classList.remove('hidden');
                errorMessageDiv.classList.add('hidden');
                resultsActions.classList.add('hidden');
                buildTableBody.innerHTML = '';
                buildTableFoot.innerHTML = '';
                aiAnalysisDiv.innerHTML = '';

                try {
                    const result = await callApi('generateBuild', { prompt });

                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        const data = JSON.parse(result.candidates[0].content.parts[0].text);
                        currentBuildData = data; 
                        
                        aiAnalysisDiv.textContent = data.analysis;
                        aiAnalysisDiv.classList.remove('hidden');
                        buildTableBody.parentElement.classList.remove('hidden');
                        
                        let total = 0;

                        data.build.forEach((item) => {
                            const row = buildTableBody.insertRow();
                            cell(row, 0, item.component, 'font-medium text-slate-900');
                            cell(row, 1, item.name, 'text-slate-500');
                            
                            const priceCell = cell(row, 2, '', 'text-slate-500');
                            priceCell.innerHTML = `<div class="flex flex-col"><span class="font-bold text-green-600">R$ ${item.bestPrice.toFixed(2)}</span><span class="text-xs text-slate-500">${item.store}</span></div>`;

                            const actionsCell = cell(row, 3, '', 'text-center space-x-2');
                            const linkButton = createButton('Ir √† Loja', 'green', `https://www.google.com/search?q=${encodeURIComponent(item.name)} ${encodeURIComponent(item.store)}&tbm=shop`);
                            const explainButton = createButton('Explicar', 'sky', () => showExplanation(item.component, item.name));
                            actionsCell.appendChild(linkButton);
                            actionsCell.appendChild(explainButton);
                            
                            total += item.bestPrice;
                        });

                        updateTotals(total);
                        resultsActions.classList.remove('hidden');
                        aiResultsContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    } else {
                        throw new Error("A resposta da IA n√£o continha os dados esperados.");
                    }
                } catch (error) {
                    console.error("Erro ao gerar build:", error);
                    displayError(`Ocorreu um erro ao gerar a build: ${error.message}`);
                } finally {
                    setButtonLoadingState(generateBuildButton, false, '‚ú® Montar PC com IA');
                }
            });

            const cell = (row, index, text, className = '') => {
                const cell = row.insertCell(index);
                cell.className = `px-6 py-4 whitespace-nowrap text-sm ${className}`;
                cell.textContent = text;
                return cell;
            };

            const createButton = (text, color, action) => {
                const button = document.createElement(typeof action === 'string' ? 'a' : 'button');
                button.className = `inline-block bg-${color}-100 text-${color}-700 hover:bg-${color}-200 font-semibold py-1 px-3 rounded-full text-xs transition-colors`;
                button.textContent = text;
                if (typeof action === 'string') {
                    button.href = action;
                    button.target = '_blank';
                    button.rel = 'noopener noreferrer';
                } else {
                    button.onclick = action;
                }
                return button;
            };

            const updateTotals = (total) => {
                 buildTableFoot.innerHTML = '';
                 const footerRow = buildTableFoot.insertRow();
                 const totalCellLabel = footerRow.insertCell(0);
                 totalCellLabel.colSpan = 2;
                 totalCellLabel.className = 'px-6 py-4 text-right text-sm font-bold text-slate-800';
                 totalCellLabel.textContent = 'Total Estimado:';
                 
                 const totalCellValue = footerRow.insertCell(1);
                 totalCellValue.colSpan = 2;
                 totalCellValue.className = 'px-6 py-4 text-left text-sm font-bold text-slate-800';
                 totalCellValue.textContent = `R$ ${total.toFixed(2)}`;
                 
                 const disclaimerRow = buildTableFoot.insertRow();
                 const disclaimerCell = disclaimerRow.insertCell(0);
                 disclaimerCell.colSpan = 4;
                 disclaimerCell.className = 'px-6 py-2 text-center text-xs text-slate-500 font-semibold';
                 disclaimerCell.innerHTML = '&#9888;&#65039; Pre√ßos s√£o <strong>estimativas</strong> baseadas em uma simula√ß√£o de busca e podem variar.';
            };

            optimizeBuildButton.addEventListener('click', async () => {
                if (!currentBuildData) return;
                setButtonLoadingState(optimizeBuildButton, true, '‚ú® Otimizar Custo-Benef√≠cio');
                optimizationResultContainer.classList.add('hidden');
                
                try {
                    const result = await callApi('optimizeBuild', { build: currentBuildData.build, prompt: pcRequestInput.value });
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        optimizationResultText.innerHTML = result.candidates[0].content.parts[0].text.replace(/\n/g, '<br><br>');
                        optimizationResultContainer.classList.remove('hidden');
                        optimizationResultContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    } else { throw new Error("A resposta da IA estava vazia."); }
                } catch (error) {
                     optimizationResultText.textContent = `Falha ao obter sugest√£o: ${error.message}`;
                     optimizationResultContainer.classList.remove('hidden');
                } finally {
                    setButtonLoadingState(optimizeBuildButton, false, '‚ú® Otimizar Custo-Benef√≠cio');
                }
            });

            analyzeFpsButton.addEventListener('click', async () => {
                if (!currentBuildData) return;
                setButtonLoadingState(analyzeFpsButton, true, 'üéÆ Analisar Desempenho');
                fpsAnalysisContainer.classList.add('hidden');

                try {
                    const result = await callApi('analyzeFps', { build: currentBuildData.build });
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        const data = JSON.parse(result.candidates[0].content.parts[0].text);
                        fpsTextAnalysis.textContent = data.analysis;
                        if(fpsChartInstance) fpsChartInstance.destroy();
                        
                        fpsChartInstance = new Chart(fpsChartCanvas, {
                            type: 'bar',
                            data: {
                                labels: data.games.map(g => g.gameName),
                                datasets: [{
                                    data: data.games.map(g => g.estimatedFps),
                                    backgroundColor: 'rgba(59, 130, 246, 0.6)',
                                    borderColor: 'rgba(59, 130, 246, 1)',
                                    borderWidth: 1, borderRadius: 4
                                }]
                            },
                            options: {
                                scales: { y: { beginAtZero: true } },
                                plugins: { legend: { display: false }, title: { display: true, text: 'Desempenho Estimado em Jogos Populares (1080p, Alto)' } },
                                maintainAspectRatio: false
                            }
                        });
                        fpsAnalysisContainer.classList.remove('hidden');
                        fpsAnalysisContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    } else { throw new Error('A IA n√£o retornou uma an√°lise de FPS.'); }
                } catch(error) {
                    fpsTextAnalysis.textContent = `Falha ao obter an√°lise: ${error.message}`;
                    fpsAnalysisContainer.classList.remove('hidden');
                } finally {
                    setButtonLoadingState(analyzeFpsButton, false, 'üéÆ Analisar Desempenho');
                }
            });

            const showExplanation = async (component, name) => {
                modalTitle.textContent = `Explicando: ${component}`;
                modalBody.innerHTML = `<div class="flex justify-center items-center h-24"><div class="spinner modal-spinner"></div></div>`;
                explanationModal.classList.remove('hidden');
                try {
                    const result = await callApi('explainComponent', { component, name });
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        modalBody.innerHTML = `<p class="text-slate-700">${result.candidates[0].content.parts[0].text.replace(/\n/g, '<br><br>')}</p>`;
                    } else { throw new Error('A IA n√£o retornou uma explica√ß√£o.'); }
                } catch(error) {
                    modalBody.innerHTML = `<p class="text-red-600">Desculpe, n√£o foi poss√≠vel carregar a explica√ß√£o.</p>`;
                }
            };

            closeModalButton.addEventListener('click', () => explanationModal.classList.add('hidden'));
            explanationModal.addEventListener('click', (e) => {
                if(e.target === explanationModal) explanationModal.classList.add('hidden');
            });

            const audienceCards = document.querySelectorAll('.audience-card');
            const valueDisplay = document.getElementById('value-proposition-display');
            const valueContents = document.querySelectorAll('.value-content');
            const defaultContent = document.getElementById('default-value');
            let activeCard = null;

            audienceCards.forEach(card => {
                card.addEventListener('click', () => {
                    const targetId = card.dataset.target;
                    const targetContent = document.getElementById(`${targetId}-value`);
                    if (activeCard === card) {
                        card.classList.remove('border-teal-500', 'bg-teal-50');
                        activeCard = null;
                        valueContents.forEach(content => content.classList.add('hidden'));
                        defaultContent.classList.remove('hidden');
                    } else {
                        if (activeCard) activeCard.classList.remove('border-teal-500', 'bg-teal-50');
                        card.classList.add('border-teal-500', 'bg-teal-50');
                        activeCard = card;
                        valueContents.forEach(content => content.classList.add('hidden'));
                        if (targetContent) targetContent.classList.remove('hidden');
                        valueDisplay.classList.remove('opacity-0');
                    }
                });
            });

            new Chart(document.getElementById('monetizationChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Marketing de Afiliados', 'Publicidade (Adsense)', 'Conte√∫do e YouTube'],
                    datasets: [{
                        data: [70, 20, 10],
                        backgroundColor: ['#14b8a6', '#06b6d4', '#0ea5e9'],
                        borderColor: '#f8fafc', borderWidth: 4, hoverOffset: 8
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, cutout: '65%', plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `${c.label}: ${c.parsed}%` } } } }
            });
            
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            document.querySelectorAll('.mobile-nav-link').forEach(link => link.addEventListener('click', () => mobileMenu.classList.add('hidden')));

            const sections = document.querySelectorAll('main section');
            const navLinks = document.querySelectorAll('.nav-link');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href') === `#${id}`);
                            link.classList.toggle('text-teal-600', link.getAttribute('href') === `#${id}`);
                        });
                    }
                });
            }, { threshold: 0.4 });
            sections.forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>
